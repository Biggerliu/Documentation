.. _TPYBoard_tutorial_bmp180:

F407 Micropython控制BMP180测量气压
=====================================

1.实验目的
---------------

   1. 学习在PC机系统中扩展简单I/O 接口的方法。
   2. 学习BMP180测量气压的方法。
   3. 学习F407 Micropython开发板 I2C接口的用法。
   
2.所需元器件
---------------

   F407 Micropython开发板一块
   BMP180气压模块一个
   数据线一条
   杜邦线若干
   Putty调试工具
 
3.BMP180气压传感器的接线方法
-------------------------------

BMP180是一直常见的气压传感器，BMP180是一款高精度、小体积、超低能耗的压力传感器，可以应用在移动设备中,它的性能卓越，精度最低可以达到0.03hPa，并且耗电极低，只有3μA；BMP180采用强大的8-pin陶瓷无引线芯片承载（LCC）超薄封装，可以通过I2C总线直接与各种微处理器相连。
 
.. image:: http://old.tpyboard.com/document/documents/tb407/bmp180_1.jpg

F407 Micropython开发板和BMP180气压模块的针脚对应关系如下：
IIC接口1的接线方法（程序中bmp=BMP180(1)调用iic接口1）

+----------------------------+--------------------+
|  F407 Micropython开发板    |  BMP180气压模块    |
+============================+====================+
|  Y6                        |  SCL               |
+----------------------------+--------------------+
|  Y5                        |  SDA               |
+----------------------------+--------------------+
|  3V3                       |  VCC               |
+----------------------------+--------------------+
|  GND                       |  GND               |
+----------------------------+--------------------+

IIC接口2的接线方法（程序中bmp=BMP180(2)调用iic接口2）

+-------------------------+------------------+
|  F407 Micropython开发板 |  BMP180气压模块  |
+=========================+==================+
|  X32                    |  SCL             |
+-------------------------+------------------+
|  X33                    |  SDA             |
+-------------------------+------------------+
|  3V3                    |  VCC             |
+-------------------------+------------------+
|  GND                    |  GND             |
+-------------------------+------------------+

              
4.源代码
------------
   接线ok后，导入bmp180.py，编写main.py保存，等红灯熄灭后，rst开发板，用Putty可以看到时间和温度。

.. image:: http://old.tpyboard.com/document/documents/tb407/bmp180_2.png
 
.. code-block:: python

	from bmp180 import BMP180

	bmp=BMP180(1)
	tem=bmp.getTemp()
	press=bmp.getPress()
	altitude=bmp.getAltitude()
	print('tem:',tem)
	print('press:',press)
	print('altude:',altitude)
	
	
* `下载源码 <http://old.tpyboard.com/document/documents/tb407/bmp180.rar>`_ 
